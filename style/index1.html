<script language = "javascript">

	$(function() {
		$(".input_checkable").keydown(function(event) {
			if ( event.ctrlKey === true || event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 32 ||
				(event.keyCode == 65 && event.ctrlKey === true) ||
				(event.keyCode >= 35 && event.keyCode <= 39)) {
					 return;
			}
			else {
				if ((event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
					event.preventDefault();
				}
			}
		});
		var date = new Date();
		var H = date.getHours();
		var m = date.getMinutes();
		var s = date.getSeconds();
		$("#h1").val(H);
		$("#m1").val(m);
		$("#s1").val(s);
		$(".input_checkable").focus(function() {
			if ($(this).val()=='00') $(this).val('');
		});
		$(".input_checkable").blur(function() {
			if ($(this).val()=='') $(this).val('00');
		});
	});

	function calculate()
	{

		var h1 = $('#h1').val();
		var m1 = $('#m1').val();
		var s1 = $('#s1').val();
		var h2 = $('#h2').val();
		var m2 = $('#m2').val();
		var s2 = $('#s2').val();

		$.ajax({url: '/!calcs/newimg/time.php?type=substract&h1='+h1+'&m1='+m1+'&s1='+s1+'&h2='+h2+'&m2='+m2+'&s2='+s2, async: true, type: "GET", success: function(data){
			$('#diff_result span').html(data);
			$('#diff_result').show();
		}});
	}

	function convert()
	{

		var convert_from = $('#convert_from').val();
		var convert_to = $('#convert_to').val();
		var time_in = $('#time').val();

		$.ajax({url: '/!calcs/newimg/time.php?type=convert&in='+convert_from+'&out='+convert_to+'&time='+time_in, async: true, type: "GET", success: function(data){
			var f = $("#convert_from").val();
			var con = $("#convert_to").val();
			var end = "";
			if (con == "1"){
				end = "секунд"
			}
			if (con == "60"){
				end = "минут";
			}
			if (con == "3600"){
				end = "часов";
			}
			if (con == "86400"){
				end = "дней";
			}
			if (f == "format"){
				$('#convert_result span').html($("#time").val()+" = "+data+" "+end);
			}
			if (f == "1"){
				$('#convert_result span').html($("#time").val()+" секунд = "+data+" "+end);
			}
			if (f == "60"){
				$('#convert_result span').html($("#time").val()+" минут = "+data+" "+end);
			}
			if (f == "3600"){
				$('#convert_result span').html($("#time").val()+" часов = "+data+" "+end);
			}
			if (f == "86400"){
				$('#convert_result span').html($("#time").val()+" дней = "+data+" "+end);
			}
			$('#convert_result').show();
		}});
	}

</script>

<style type = "text/css">

input, select
{
	background-color: #FFFFFF;
	border: 2px solid #E6E4DE;
	border-radius: 3px;
	padding: 0.3em;
	text-align: center;
	width:100%;
}

div
{
	margin: 10px 0px 10px 0px;
}

.button
{
	cursor: pointer;
	text-align:center;
	font-family:Verdana;
	background: url("/web/20160202232310im_/http://calcsoft.ru/sites/all/themes/sky/images/ui/ui-bg_highlight-soft_90_e6e4e2_1x100.png") 50% 50% repeat-x #E6E4E2;
	border-bottom: 1px solid #BBBBBB;
	border-left: 1px solid #E6E4E2;
	border-radius: 4px;
	border-right: 1px solid #BBBBBB;
	border-top: 1px solid #E6E4E2;
	color: #000000;
	font-size: 1em;
	font-weight: 500;
	margin: 0px 0.5em 0px 0px;
	overflow: hidden;
	padding: 0.5em 1em;
}

body
{
	padding-bottom: 100px;
	font-family: "Helvetica Neue",Helvetica,Arial,Geneva,sans-serif;
}

input.time_piece
{
	width: 30px;
}

#time_diff_calc
{
	padding: 5px;
	padding-bottom: 15px;
	margin: 10px;
	border: solid 1px #999;
	border-radius: 5px;
	width: 270px;
}
#time_diff_calc table
{
	margin-top: 12px;
	margin-left: 10px;
	font-size: 12px;
border: none;
}
#time_diff_calc table td,
#time_diff_calc table th
{
border: none;
}
#time_diff_calc table .button
{
	margin-top: 8px;
}

#time_convert_calc
{
	padding: 5px;
	padding-bottom: 15px;
	margin: 10px;
	border: solid 1px #999;
	border-radius: 5px;
	width: 270px;
}
#time_convert_calc table
{
	margin-top: 12px;
	margin-left: 10px;
	font-size: 12px;
  border: none;
}
#time_convert_calc table td,
#time_convert_calc table th {
  border: none;
}
#time_convert_calc table .button
{
	margin-top: 8px;
}
#time_convert_calc td
{
	text-align: center;
}
.calc_title{
	font-size: 10px;
	margin: 6px 0 -11px;
	text-align: right;
}



</style>

<div id = "time_diff_calc" >


		<div class="calc_title" style="font-weight: bold;">Часы &nbsp;&nbsp;&nbsp; :&nbsp;&nbsp;&nbsp; &nbsp;Минуты &nbsp;&nbsp;&nbsp;:&nbsp; &nbsp; Секунды</div>
	<table>
		<tr><td>Время&nbsp;№1</td><td><input class = "input_checkable time_piece" id = "h1" value = "00">&nbsp;&nbsp;&nbsp;:</td><td> <input class = "input_checkable time_piece" id = "m1" value = "00">&nbsp;&nbsp;&nbsp;:</td><td> <input class = "input_checkable time_piece" id = "s1" value = "00"></td></tr>
		<tr><td>Время&nbsp;№2</td><td><input class = "input_checkable time_piece" id = "h2" value = "00">&nbsp;&nbsp;&nbsp;:</td><td> <input class = "input_checkable time_piece" id = "m2" value = "00">&nbsp;&nbsp;&nbsp;:</td><td> <input class = "input_checkable time_piece" id = "s2" value = "00"></td></tr>
		<tr><td></td><td colspan = 3><div class = "button" type = "button" onclick = "calculate()">Посчитать</div></td>
	</table>

	<div id = "diff_result" style = text-align:center; font-weight: bold;" >Разность: <span>664</span></div>

</div>
